function fixTable(e){var t,s=e.querySelector("thead"),r=e.querySelector("tbody");function o(){var e=[].slice.call(s.querySelectorAll("th")),t=[].slice.call(r.querySelectorAll("tr"));r.setAttribute("style",""),s.style.width="",s.style.position="",s.style.top="",s.style.left="",s.style.zIndex="",e.forEach(function(e){e.style.display="",e.style.width="",e.style.position="",e.style.top="",e.style.left=""}),t.forEach(function(e){e.setAttribute("style","")}),[].slice.call(r.querySelectorAll("td")).forEach(function(e){e.style.width="",e.style.position="",e.style.left=""});var o=e.map(function(e){var t=e.getBoundingClientRect(),o=document.defaultView.getComputedStyle(e,"");return{boundingWidth:t.width,boundingHeight:t.height,width:parseInt(o.width,10),paddingLeft:parseInt(o.paddingLeft,10)}}),l=o.reduce(function(e,t){return e+t.boundingWidth},0);r.style.display="block",r.style.width=l+"px",s.style.width=l-o[0].boundingWidth+"px",s.style.position="absolute",s.style.top="0",s.style.left=o[0].boundingWidth+"px",s.style.zIndex=10,e.forEach(function(e,t){e.style.width=o[t].width+"px",0===t&&(e.style.position="absolute",e.style.top="0",e.style.left=-o[0].boundingWidth+"px")}),r.style.marginTop=o[0].boundingHeight+"px",t.forEach(function(e,t){e.style.display="block",e.style.paddingLeft=o[0].boundingWidth+"px",[].slice.call(e.querySelectorAll("td")).forEach(function(e,t){e.style.width=o[t].width+"px",0===t&&(e.style.position="absolute",e.style.left="0")})})}return e.style.overflow="auto",e.style.position="relative",o(),window.addEventListener("resize",function(){t||(t=setTimeout(function(){t=null,o()},500))},!1),e.addEventListener("scroll",function(){s.style.transform="translate3d(0,"+this.scrollTop+"px,0)";var o="translate3d("+this.scrollLeft+"px,0,0)";s.querySelector("th").style.transform=o,[].slice.call(r.querySelectorAll("tr > td:first-child")).forEach(function(e,t){e.style.transform=o})}),{relayout:o}}fixTable(document.getElementById("container")),function(h){h.fn.tableHover=function(e){var f=h.extend({allowHead:!0,allowBody:!0,allowFoot:!0,headRows:!1,bodyRows:!0,footRows:!1,spanRows:!0,headCols:!1,bodyCols:!0,footCols:!1,spanCols:!0,ignoreCols:[],headCells:!1,bodyCells:!0,footCells:!1,rowClass:"hover",colClass:"",cellClass:"",clickClass:""},e);return this.each(function(){var e,i=[],d=[],r=this,c=0,a=[-1,-1];if(r.tBodies&&r.tBodies.length){var t=function(e,t){var o,l,s,r,a,n;for(s=0;s<e.length;s++,c++)for(l=e[s],r=0;r<l.cells.length;r++){if(o=l.cells[r],"TBODY"==t&&f.bodyRows||"TFOOT"==t&&f.footRows||"THEAD"==t&&f.headRows)for(n=o.rowSpan;0<=--n;)d[c+n].push(o);if("TBODY"==t&&f.bodyCols||"THEAD"==t&&f.headCols||"TFOOT"==t&&f.footCols)for(n=o.colSpan;0<=--n&&(a=o.realIndex+n,!(-1<h.inArray(a+1,f.ignoreCols)));)i[a]||(i[a]=[]),i[a].push(o);("TBODY"==t&&f.allowBody||"THEAD"==t&&f.allowHead||"TFOOT"==t&&f.allowFoot)&&(o.thover=!0)}},o=function(e,t){h.fn.tableHoverHover=t?h.fn.addClass:h.fn.removeClass;var o,l,s=i[e.realIndex]||[],r=[],a=0;if(""!=f.colClass){for(;f.spanCols&&++a<e.colSpan&&i[e.realIndex+a];)s=s.concat(i[e.realIndex+a]);h(s).tableHoverHover(f.colClass)}if(""!=f.rowClass){for(o=e.parentNode.realRIndex,d[o]&&(r=r.concat(d[o])),a=0;f.spanRows&&++a<e.rowSpan;)d[o+a]&&(r=r.concat(d[o+a]));h(r).tableHoverHover(f.rowClass)}""!=f.cellClass&&("TBODY"==(l=e.parentNode.parentNode.nodeName.toUpperCase())&&f.bodyCells||"THEAD"==l&&f.headCells||"TFOOT"==l&&f.footCells)&&h(e).tableHoverHover(f.cellClass)};for(function(e){for(var t=e.rows,o=t.length,l=[],s=0;s<o;s++)for(var r=t[s].cells,a=r.length,n=0;n<a;n++){var i=r[n],d=i.rowSpan||1,c=i.colSpan||1,f=-1;l[s]||(l[s]=[]);for(var h=l[s];h[++f];);i.realIndex=f;for(var u=s;u<s+d;u++){l[u]||(l[u]=[]);for(var y=l[u],p=f;p<f+c;p++)y[p]=1}}}(r),function(e){var t,o,l=0,s=e.tHead?e.tHead.rows:0;if(s)for(t=0;t<s.length;t++)s[t].realRIndex=l++;for(o=0;o<e.tBodies.length;o++)if(s=e.tBodies[o].rows)for(t=0;t<s.length;t++)s[t].realRIndex=l++;if(s=e.tFoot?e.tFoot.rows:0)for(t=0;t<s.length;t++)s[t].realRIndex=l++}(r),e=0;e<r.rows.length;e++)d[e]=[];for(r.tHead&&t(r.tHead.rows,"THEAD"),e=0;e<r.tBodies.length;e++)t(r.tBodies[e].rows,"TBODY");r.tFoot&&t(r.tFoot.rows,"TFOOT"),h(this).bind("mouseover",function(e){for(var t=e.target;t!=this&&!0!==t.thover;)t=t.parentNode;!0===t.thover&&o(t,!0)}).bind("mouseout",function(e){for(var t=e.target;t!=this&&!0!==t.thover;)t=t.parentNode;!0===t.thover&&o(t,!1)}).click(function(e){for(var t=e.target;t&&t!=r&&!t.thover;)t=t.parentNode;if(t.thover&&""!=f.clickClass){var o=t.realIndex,l=t.parentNode.realRIndex,s="";h("td."+f.clickClass+", th."+f.clickClass,r).removeClass(f.clickClass),a=o!=a[0]||l!=a[1]?(""!=f.rowClass&&(s+=",."+f.rowClass),""!=f.colClass&&(s+=",."+f.colClass),""!=f.cellClass&&(s+=",."+f.cellClass),""!=s&&h("td, th",r).filter(s.substring(1)).addClass(f.clickClass),[o,l]):[-1,-1]}})}})}}(jQuery),$(".chart").tableHover({colClass:"hover",cellClass:"hovercell",headCols:!1});
